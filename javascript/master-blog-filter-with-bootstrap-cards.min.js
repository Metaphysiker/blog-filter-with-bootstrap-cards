$(document).ready(function(){var bootstrap_cards_object={endpoint:"",category_names:{},per_page:50,categories_to_be_excluded:"0",categories_of_current_page:"0",date_options:{year:"numeric",month:"long",day:"numeric"},current_offset:0,empty_items_container:function(e){$(".bootstrap_cards_items_container").empty()},empty_load_more_button_container:function(e){$(".bootstrap_cards_load_more_button_container").empty()},toggle_spinner:function(e){$(".bootstrap_cards_spinner").toggle()},toggle_sub_category:function(e){$(".bootstrap_cards_sub_category").toggle()},add_spinner:function(e){bootstrap_cards_object.empty_items_container(),$(".bootstrap_cards_items_container").append(`
      <div class="text-center my-3">
        <div class="lds-ellipsis"><div></div><div></div><div></div><div></div></div>
      </div>
      `)},add_load_more_button:function(e){bootstrap_cards_object.empty_load_more_button_container(),$(".bootstrap_cards_load_more_button_container").append(`
      <button type="button" class="bootstrap_cards_load_more_button my-4" data-category-id="${e}">Mehr</button>
      `),$(".bootstrap_cards_load_more_button").on("click",function(){bootstrap_cards_object.get_and_append_items($(this).data("category-id"))})},add_listeners_for_category_buttons:function(e){$(".bootstrap_cards_category_button").on("click",function(){bootstrap_cards_object.get_and_place_items($(this).data("category-id")),$(".bootstrap_cards_category_button").removeClass("disabled"),$(this).toggleClass("disabled")})},get_image_url:function(e){var t,a="";return void 0===e._embedded||void 0===e._embedded["wp:featuredmedia"]||void 0===e._embedded["wp:featuredmedia"][0]||(void 0!==(t=e._embedded["wp:featuredmedia"][0].media_details.sizes).medium_large?a=t.medium_large.source_url:void 0!==t.large?a=t.large.source_url:void 0!==t.medium?a=t.medium.source_url:void 0!==t.full&&(a=t.full.source_url)),a=""===a?void 0===e.yoast_head_json||void 0===e.yoast_head_json.og_image||void 0===e.yoast_head_json.og_image[0]?"https://i.picsum.photos/id/287/300/200.jpg?hmac=eVf6BLO211WaBRmmt-cOiXLvrDaqS7nqHAIVHR4YiUQ":e.yoast_head_json.og_image[0].url:a},append_item:function(e){var t=bootstrap_cards_object.get_image_url(e);$(".bootstrap_cards_items_container").append(`
    <div class="col">
      <div class="card h-100 bootstrap-cards-card">
      <img src="${t}" class="card-img-top" style="width: 100%; height: 340px; object-fit: cover;">
        <div class="card-body">
          <h2 class="text-center bootstrap_cards_title">${e.title.rendered}</h2>
          <p class="card-text bootstrap_cards_content">${bootstrap_cards_object.truncate(e.content.rendered.replace(/(<([^>]+)>)/gi," ").replace(/\n|\r|\t/g,""),25)}</p>
          <p class="text-center">
            <a href="${e.link}" class="bootstrap_cards_href stretched-link">Weiterlesen »</a>
          </p>
        </div>
        <div class="card-footer bg-white text-center bootstrap_cards_footer">
          ${new Date(e.date).toLocaleDateString("de-DE",bootstrap_cards_object.date_options)}
        </div>
      </div>
    </div>
      `)},append_item_with_tag:function(e){var t=bootstrap_cards_object.get_image_url(e);$(".bootstrap_cards_items_container").append(`
    <div class="col">
      <div class="card h-100 bootstrap-cards-card">
      <img src="${t}" class="card-img-top" style="width: 100%; height: 340px; object-fit: cover;">
        <div class="card-body">
        <span class="bootstrap_cards_pill">
            ${bootstrap_cards_object.category_names[e.categories[0]]}
        </span>

          <h2 class="text-center bootstrap_cards_title">${e.title.rendered}</h2>
          <p class="card-text bootstrap_cards_content">${bootstrap_cards_object.truncate(e.content.rendered.replace(/(<([^>]+)>)/gi," ").replace(/\n|\r|\t/g,""),25)}</p>
          <p class="text-center">
            <a href="${e.link}" class="bootstrap_cards_href stretched-link">Weiterlesen »</a>
          </p>
        </div>
        <div class="card-footer bg-white text-center bootstrap_cards_footer">
          ${new Date(e.date).toLocaleDateString("de-DE",bootstrap_cards_object.date_options)}
        </div>
      </div>
    </div>
      `)},get_and_append_items:function(a){bootstrap_cards_object.current_offset=bootstrap_cards_object.current_offset+bootstrap_cards_object.per_page;var e={per_page:bootstrap_cards_object.per_page,offset:bootstrap_cards_object.current_offset};"all"==a||(e.categories=a),$.ajax({method:"GET",url:bootstrap_cards_object.endpoint+"wp/v2/posts?_embed",data:e}).done(function(e){if("all"==a)for(var t=0;t<e.length;t++)bootstrap_cards_object.append_item_with_tag(e[t]);else for(t=0;t<e.length;t++)bootstrap_cards_object.append_item(e[t]);bootstrap_cards_object.empty_load_more_button_container(),e.length>=bootstrap_cards_object.per_page&&bootstrap_cards_object.add_load_more_button(a)})},get_and_place_items:function(a){bootstrap_cards_object.toggle_spinner(),bootstrap_cards_object.empty_items_container(),bootstrap_cards_object.empty_load_more_button_container(),bootstrap_cards_object.current_offset=0,bootstrap_cards_object.toggle_sub_category(),$(".sub-category-container").hide();for(var e=String(a).split(","),t=0;t<e.length;t++)$("*[data-sub-category-container-parent-id="+e[t]+"]").show(),$("*[data-category-id="+e[t]+"]").parent().show();var o={per_page:bootstrap_cards_object.per_page};"all"==a||(o.categories=a),$.ajax({method:"GET",url:bootstrap_cards_object.endpoint+"wp/v2/posts?_embed",data:o}).done(function(e){if(bootstrap_cards_object.toggle_spinner(),bootstrap_cards_object.empty_items_container(),"all"==a)for(var t=0;t<e.length;t++)bootstrap_cards_object.append_item_with_tag(e[t]);else for(t=0;t<e.length;t++)bootstrap_cards_object.append_item(e[t]);e.length>=bootstrap_cards_object.per_page?bootstrap_cards_object.add_load_more_button(a):bootstrap_cards_object.empty_load_more_button_container()})},get_and_place_itemsx:function(a){bootstrap_cards_object.toggle_spinner(),bootstrap_cards_object.empty_items_container(),bootstrap_cards_object.empty_load_more_button_container(),bootstrap_cards_object.current_offset=0;var e={per_page:bootstrap_cards_object.per_page};"all"==a||(e.categories=a),$.ajax({method:"GET",url:bootstrap_cards_object.endpoint+"wp/v2/posts?_embed",data:e}).done(function(e){if(bootstrap_cards_object.toggle_spinner(),bootstrap_cards_object.empty_items_container(),"all"==a)for(var t=0;t<e.length;t++)bootstrap_cards_object.append_item_with_tag(e[t]);else for(t=0;t<e.length;t++)bootstrap_cards_object.append_item(e[t]);e.length>=bootstrap_cards_object.per_page?bootstrap_cards_object.add_load_more_button(a):bootstrap_cards_object.empty_load_more_button_container()})},get_and_place_categories:function(e){return new Promise(function(s,e){$.ajax({method:"GET",url:bootstrap_cards_object.endpoint+"wp/v2/categories",data:{exclude:bootstrap_cards_object.categories_to_be_excluded}}).done(function(t){var a=".bootstrap_cards_buttons_for_main_categories",o=".bootstrap_cards_buttons_for_sub_categories";$(a).empty(),$(o).empty();var r=bootstrap_cards_object.categories_of_current_page.split(",");console.log("array_of_disabled_categories"),console.log(r);let e="";r.includes("all")&&(e="disabled"),$(a).append(`
        <button type="button" class="bootstrap_cards_category_button bootstrap_cards_category_button_all mb-4 ${e}" data-category-id="all">Alle anzeigen</button>
        `);for(var n=0;n<t.length;n++){bootstrap_cards_object.category_names[t[n].id]=t[n].name;let e="";console.log("array_of_disabled_categories.includes(data[i].id.toString())"),console.log(r),console.log(t[n].id.toString()),r.includes(t[n].id.toString())&&(e="disabled"),0===t[n].parent?$(a).append(`
            <button type="button" class="bootstrap_cards_category_button my-2 ${e}" data-category-id=${t[n].id}>${t[n].name}</button>
          `):0===$("*[data-sub-category-container-parent-id="+t[n].parent+"]").length?$(o).append(`
              <div class="sub-category-container" data-sub-category-container-parent-id="${t[n].parent}" style="display:none;">
              <button type="button" class="bootstrap_cards_category_button bootstrap_cards_sub_category_button my-2 ${e}" data-category-id=${t[n].id} data-parent-category-id=${t[n].parent}>${t[n].name}</button>
              </div>
            `):$("*[data-sub-category-container-parent-id="+t[n].parent+"]").append(`

              <button type="button" class="bootstrap_cards_category_button bootstrap_cards_sub_category_button my-2 ${e}" data-category-id=${t[n].id} data-parent-category-id=${t[n].parent}>${t[n].name}</button>
              `),n+1===t.length&&s("added categories")}bootstrap_cards_object.add_listeners_for_category_buttons()})})},truncate:function(e,t){var a=e.trim().split(" "),e=a.filter(function(e){return e}),a=a.length>t?"...":"";return e.slice(0,t).join(" ")+a}},e=new Promise(function(e,t){bootstrap_cards_object.categories_to_be_excluded=$(".bootstrap_cards_container").data("categories-to-be-excluded"),e("categories to be excluded set")}),t=new Promise(function(e,t){bootstrap_cards_object.per_page=$(".bootstrap_cards_container").data("per-page"),e("per page set")}),a=new Promise(function(e,t){bootstrap_cards_object.endpoint=document.querySelector('link[rel="https://api.w.org/"]').href,e("endpoint set")}),o=new Promise(function(o,e){var t=document.querySelector('link[rel="shortlink"]').href,t=new URLSearchParams(t.split("?")[1]).get("p");$.ajax({method:"GET",url:bootstrap_cards_object.endpoint+"wp/v2/categories?post="+t}).done(function(e){let t="";0===e.length&&(t="all"),console.log(":endpoint categories post:"),console.log(e);for(var a=0;a<e.length;a++)a+1==e.length?t+=e[a].id:t=t+e[a].id+",";bootstrap_cards_object.categories_of_current_page=t,console.log("category_string"),console.log(t),o("categories of current post set")}).fail(function(e){bootstrap_cards_object.categories_of_current_page="all",o("categories of current post set")})});Promise.all([e,t,a,o]).then(function(){bootstrap_cards_object.get_and_place_categories().then(function(){bootstrap_cards_object.get_and_place_items(bootstrap_cards_object.categories_of_current_page)})},function(){console.log("ERROR!")})});