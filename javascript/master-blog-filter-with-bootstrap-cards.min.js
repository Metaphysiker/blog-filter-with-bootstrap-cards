$(document).ready(function(){var bootstrap_cards_object={endpoint:"",category_names:{},per_page:50,categories_to_be_excluded:"0",categories_of_current_page:"0",date_options:{year:"numeric",month:"long",day:"numeric"},current_offset:0,empty_items_container:function(e){$(".bootstrap_cards_items_container").empty()},empty_load_more_button_container:function(e){$(".bootstrap_cards_load_more_button_container").empty()},toggle_spinner:function(e){$(".bootstrap_cards_spinner").toggle()},add_spinner:function(e){bootstrap_cards_object.empty_items_container(),$(".bootstrap_cards_items_container").append(`
      <div class="text-center my-3">
        <div class="lds-ellipsis"><div></div><div></div><div></div><div></div></div>
      </div>
      `)},add_load_more_button:function(e){bootstrap_cards_object.empty_load_more_button_container(),$(".bootstrap_cards_load_more_button_container").append(`
      <button type="button" class="bootstrap_cards_load_more_button my-4" data-category-id="${e}">Mehr</button>
      `),$(".bootstrap_cards_load_more_button").on("click",function(){bootstrap_cards_object.get_and_append_items($(this).data("category-id"))})},add_listeners_for_category_buttons:function(e){$(".bootstrap_cards_category_button").on("click",function(){bootstrap_cards_object.get_and_place_items($(this).data("category-id")),$(".bootstrap_cards_category_button").removeClass("disabled"),$(this).toggleClass("disabled")})},get_image_url:function(e){var t,o="";return void 0===e._embedded||void 0===e._embedded["wp:featuredmedia"]||void 0===e._embedded["wp:featuredmedia"][0]||(void 0!==(t=e._embedded["wp:featuredmedia"][0].media_details.sizes).medium_large?o=t.medium_large.source_url:void 0!==t.large?o=t.large.source_url:void 0!==t.medium?o=t.medium.source_url:void 0!==t.full&&(o=t.full.source_url)),o=""===o?void 0===e.yoast_head_json||void 0===e.yoast_head_json.og_image||void 0===e.yoast_head_json.og_image[0]?"https://i.picsum.photos/id/287/300/200.jpg?hmac=eVf6BLO211WaBRmmt-cOiXLvrDaqS7nqHAIVHR4YiUQ":e.yoast_head_json.og_image[0].url:o},append_item:function(e){var t=bootstrap_cards_object.get_image_url(e);$(".bootstrap_cards_items_container").append(`
    <div class="col">
      <div class="card h-100 bootstrap-cards-card">
      <img src="${t}" class="card-img-top" style="width: 100%; height: 300px; object-fit: cover;">
        <div class="card-body">
          <h2 class="text-center bootstrap_cards_title">${e.title.rendered}</h2>
          <p class="card-text bootstrap_cards_content">${bootstrap_cards_object.truncate(e.content.rendered.replace(/(<([^>]+)>)/gi," ").replace(/\n|\r|\t/g,""),25)}</p>
          <p class="text-center">
            <a href="${e.link}" class="bootstrap_cards_href stretched-link">Weiterlesen »</a>
          </p>
        </div>
        <div class="card-footer bg-white text-center bootstrap_cards_footer">
          ${new Date(e.date).toLocaleDateString("de-DE",bootstrap_cards_object.date_options)}
        </div>
      </div>
    </div>
      `)},append_item_with_tag:function(e){var t=bootstrap_cards_object.get_image_url(e);$(".bootstrap_cards_items_container").append(`
    <div class="col">
      <div class="card h-100 bootstrap-cards-card">
      <img src="${t}" class="card-img-top" style="width: 100%; height: 300px; object-fit: cover;">
        <div class="card-body">
        <span class="bootstrap_cards_pill">
            ${bootstrap_cards_object.category_names[e.categories[0]]}
          </span>

          <h2 class="text-center bootstrap_cards_title">${e.title.rendered}</h2>
          <p class="card-text bootstrap_cards_content">${bootstrap_cards_object.truncate(e.content.rendered.replace(/(<([^>]+)>)/gi," ").replace(/\n|\r|\t/g,""),25)}</p>
          <p class="text-center">
            <a href="${e.link}" class="bootstrap_cards_href stretched-link">Weiterlesen »</a>
          </p>
        </div>
        <div class="card-footer bg-white text-center bootstrap_cards_footer">
          ${new Date(e.date).toLocaleDateString("de-DE",bootstrap_cards_object.date_options)}
        </div>
      </div>
    </div>
      `)},get_and_append_items:function(o){bootstrap_cards_object.current_offset=bootstrap_cards_object.current_offset+bootstrap_cards_object.per_page;var e={per_page:bootstrap_cards_object.per_page,offset:bootstrap_cards_object.current_offset};"all"==o||(e.categories=o),$.ajax({method:"GET",url:bootstrap_cards_object.endpoint+"wp/v2/posts?_embed",data:e}).done(function(e){if("all"==o)for(var t=0;t<e.length;t++)bootstrap_cards_object.append_item_with_tag(e[t]);else for(t=0;t<e.length;t++)bootstrap_cards_object.append_item(e[t]);bootstrap_cards_object.empty_load_more_button_container(),e.length>=bootstrap_cards_object.per_page&&bootstrap_cards_object.add_load_more_button(o)})},get_and_place_items:function(o){bootstrap_cards_object.toggle_spinner(),bootstrap_cards_object.empty_items_container(),bootstrap_cards_object.empty_load_more_button_container(),bootstrap_cards_object.current_offset=0;var e={per_page:bootstrap_cards_object.per_page};"all"==o||(e.categories=o),console.log("DATA:"),console.log(e),$.ajax({method:"GET",url:bootstrap_cards_object.endpoint+"wp/v2/posts?_embed",data:e}).done(function(e){if(bootstrap_cards_object.toggle_spinner(),bootstrap_cards_object.empty_items_container(),"all"==o)for(var t=0;t<e.length;t++)bootstrap_cards_object.append_item_with_tag(e[t]);else for(t=0;t<e.length;t++)bootstrap_cards_object.append_item(e[t]);e.length>=bootstrap_cards_object.per_page?bootstrap_cards_object.add_load_more_button(o):bootstrap_cards_object.empty_load_more_button_container()})},get_and_place_itemsx:function(o){bootstrap_cards_object.toggle_spinner(),bootstrap_cards_object.empty_items_container(),bootstrap_cards_object.empty_load_more_button_container(),bootstrap_cards_object.current_offset=0,console.log("itemsx "+o);var e={per_page:bootstrap_cards_object.per_page};"all"==o||(e.categories=o,console.log(e.categories)),$.ajax({method:"GET",url:bootstrap_cards_object.endpoint+"wp/v2/posts?_embed",data:e}).done(function(e){if(bootstrap_cards_object.toggle_spinner(),bootstrap_cards_object.empty_items_container(),"all"==o)for(var t=0;t<e.length;t++)bootstrap_cards_object.append_item_with_tag(e[t]);else for(t=0;t<e.length;t++)bootstrap_cards_object.append_item(e[t]);e.length>=bootstrap_cards_object.per_page?bootstrap_cards_object.add_load_more_button(o):bootstrap_cards_object.empty_load_more_button_container()})},get_and_place_categories:function(e){$.ajax({method:"GET",url:bootstrap_cards_object.endpoint+"wp/v2/categories",data:{exclude:bootstrap_cards_object.categories_to_be_excluded}}).done(function(t){$(".bootstrap_cards_buttons_container").empty(),$(".bootstrap_cards_buttons_container").append(`
        <button type="button" class="bootstrap_cards_category_button bootstrap_cards_category_button_all mb-4" data-category-id="all">Alle anzeigen</button>
        `);for(var o=bootstrap_cards_object.categories_of_current_page.split(","),a=0;a<t.length;a++){bootstrap_cards_object.category_names[t[a].id]=t[a].name;let e="";console.log(o),console.log(t[a].id.toString()),console.log(o.includes(t[a].id.toString())),o.includes(t[a].id.toString())&&(e="disabled"),$(".bootstrap_cards_buttons_container").append(`
          <button type="button" class="bootstrap_cards_category_button my-2 ${e}" data-category-id=${t[a].id}>${t[a].name}</button>
          `)}bootstrap_cards_object.add_listeners_for_category_buttons()})},truncate:function(e,t){var o=e.trim().split(" "),e=o.filter(function(e){return e}),o=o.length>t?"...":"";return e.slice(0,t).join(" ")+o}},e=new Promise(function(e,t){bootstrap_cards_object.categories_to_be_excluded=$(".bootstrap_cards_container").data("categories-to-be-excluded"),e("categories to be excluded set")}),t=new Promise(function(e,t){bootstrap_cards_object.per_page=$(".bootstrap_cards_container").data("per-page"),e("per page set")}),o=new Promise(function(e,t){bootstrap_cards_object.endpoint=document.querySelector('link[rel="https://api.w.org/"]').href,e("endpoint set")}),a=new Promise(function(a,e){var t=document.querySelector('link[rel="shortlink"]').href,t=new URLSearchParams(t.split("?")[1]).get("p");$.ajax({method:"GET",url:bootstrap_cards_object.endpoint+"wp/v2/categories?post="+t}).done(function(e){let t="";0===e.length&&(t="all");for(var o=0;o<e.length;o++)o+1==e.length?t+=e[o].id:t=t+e[o].id+",";bootstrap_cards_object.categories_of_current_page=t,console.log("Categories"),console.log(bootstrap_cards_object.categories_of_current_page),a("categories of current post set")}).fail(function(e){bootstrap_cards_object.categories_of_current_page="all",a("categories of current post set")})});Promise.all([e,t,o,a]).then(function(){bootstrap_cards_object.get_and_place_categories(),bootstrap_cards_object.get_and_place_items(bootstrap_cards_object.categories_of_current_page)},function(){console.log("ERROR!")})});